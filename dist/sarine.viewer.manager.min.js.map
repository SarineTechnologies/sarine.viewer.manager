{"version":3,"sources":["sarine.viewer.manager.js"],"names":["ViewerManger","option","fromTag","toTag","stoneViews","template","jsons","logicRoot","templateContainers","window","cacheVersion","configuration","initLocalStorage","initTemplatesMapper","initTemplates","viewersBaseUrl","jsonsAll","allViewresList","viewers","this","bind","loadTemplate","bindElementToSelector","addViewer","configurationToTemplateMapper","existInConfig","experiencesList","findAttribute","getAllTemplates","getPath","getTemplateLists","getTemplateMapperByConfigName","iconsList","infoPopupsList","jsonsAllObj","logicPath","popupInfoMapper","recurse","prototype","Error","src","arr","split","pop","join","type","Storage","localStorage","getItem","setItem","allTemplates","templates","icons","infoPopups","sarineViewerTemplatesMapping","mapper","getMapper","selector","arrDefer","defer","_t","$","Deferred","document","viewersList","JSON","parse","stringify","find","each","_this","i","v","active","attr","coordinates","menu","order","toElement","_i","_len","_ref","attributes","length","data","name","value","version","id","addClass","replaceWith","push","$el","text","item","key","mapObj","gradeScales","replace","filter","date","format","indexOf","report","moment","utc","when","apply","then","resolve","o","props","shift","obj","ns","exp","ret","templateVersion","atom","infos","hasOwnProperty","iconName","icon","parseInt","NaN","templateName","lightReportViewer","experience","toString","page","infosIndex","sarineViewerTemplates","experiences","templateMap","infoName","deferArr","scripts","load","a","b","c","prepend","tagName","location","origin","pathname","hash","ajaxSetup","cache","getScript","append","remove","href","container","lists","ph","trigger","callbackPic","path","s","url","async","getJSON","d","instance","args","imagesArr","appendTo","end","onload","inst","eval","extend","element","stoneProperties","baseUrl","getViewers","sortByOrder","viewersArr","forEach","init_list","list","method","current","pmId","_list","_method","Id","first_init","full_init","stop","play","call"],"mappings":"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","file":"sarine.viewer.manager.min.js"}